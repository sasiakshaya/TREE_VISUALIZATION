<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Binary Search Tree Visualization</title>

<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">

<style>
/* ================= BACKGROUND ================= */
body{
  margin:0;
  min-height:120vh;
  font-family:'Space Grotesk',sans-serif;
  background:
    radial-gradient(circle at 20% 20%, #0080ff, transparent 40%),
    radial-gradient(circle at 80% 30%, #ff00ae, transparent 40%),
    radial-gradient(circle at 50% 80%, #92431f, transparent 45%),
    linear-gradient(135deg, #050505, #292b36, #020617);
  background-size:200% 200%;
  animation:bgMove 18s ease infinite;
  color:#fff;
}
@keyframes bgMove{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

/* ================= HEADING ================= */
h1{
  font-family:'Orbitron',sans-serif;
  text-align:center;
  font-size:36px;
  margin:18px 0 6px;
  letter-spacing:2px;
  text-shadow:0 0 20px rgba(0,255,255,.6);
}

/* ================= MESSAGE ================= */
#message{
  text-align:center;
  min-height:26px;
  margin-bottom:10px;
  font-size:18px;
  font-weight:700;
  opacity:0;
  transition:opacity .5s ease;
}
#message.show{opacity:1}

.success{color:#00ffcc}
.error{color:#ff4d6d}
.warn{color:#ffb703}

/* ================= LAYOUT ================= */
.container{
  display:flex;
  height:calc(100vh - 110px);
}

/* ================= SIDE PANEL ================= */
.panel{
  width:300px;
  padding:24px;
  background:rgba(10,10,25,.55);
  backdrop-filter:blur(18px);
  box-shadow:12px 0 40px rgba(0,0,0,.9);
}
.mini-title{
  font-family:'Orbitron',sans-serif;
  font-size:15px;
  letter-spacing:2px;
  margin-bottom:14px;
  color:#9ffcff;
}
.panel input,
.panel button{
  width:100%;
  margin:8px 0;
  padding:13px;
  border:none;
  border-radius:10px;
  font-size:15px;
}
.panel input{
  background:#0f172a;
  color:#fff;
}
.panel button{
  cursor:pointer;
  background:linear-gradient(135deg,#00f2ff,#0066ff);
  color:#fff;
}
.delete{
  background:linear-gradient(135deg,#ff416c,#ff0033)!important;
}
.trav{
  background:linear-gradient(135deg,#00eeff,#ff007b)!important;
  color:#001b0f;
  font-weight:600;
}

/* ================= CANVAS ================= */
.main{flex:1;}
svg{width:100%;height:100%;}

/* ================= TREE ================= */
.node{
  fill:url(#nodeGrad);
  stroke:#9ffcff;
  stroke-width:2;
}
.line{
  stroke:rgba(255,255,255,.55);
  stroke-width:2;
}
.current{fill:#00c8ff}
.visited{fill:#30ff2d}
</style>
</head>

<body>

<h1>BINARY SEARCH TREE VISUALIZATION</h1>
<div id="message"></div>

<div class="container">

<div class="panel">
  <div class="mini-title">OPERATIONS</div>
  <input id="value" type="number" placeholder="Enter value">
  <button onclick="handleInsert()">Insert</button>
  <button class="delete" onclick="handleDelete()">Delete</button>
  <hr>
  <button class="trav" onclick="inorder()">Inorder</button>
  <button class="trav" onclick="preorder()">Preorder</button>
  <button class="trav" onclick="postorder()">Postorder</button>
  <button class="trav" onclick="levelorder()">Level Order</button>
</div>

<div class="main">
<svg id="canvas">
<defs>
  <radialGradient id="nodeGrad" cx="25%" cy="25%">
    <stop offset="0%" stop-color="#ffffff"/>
    <stop offset="55%" stop-color="#3bdcff"/>
    <stop offset="100%" stop-color="#04121f"/>
  </radialGradient>
</defs>
</svg>
</div>

</div>

<script>
/* ================= MESSAGE (AUTO HIDE) ================= */
let msgTimer=null;
function showMessage(text,type){
  const m=document.getElementById("message");
  m.className=type+" show";
  m.innerText=text;
  clearTimeout(msgTimer);
  msgTimer=setTimeout(()=>{
    m.className=type;
    m.innerText="";
  },2500);
}

/* ================= BST ================= */
class Node{
  constructor(v){
    this.val=v;
    this.left=this.right=null;
    this.x=this.y=0;
  }
}

let root=null;
const gap=90;
const PANEL_WIDTH=300;

function contains(n,v){
  while(n){
    if(v===n.val) return true;
    n=v<n.val?n.left:n.right;
  }
  return false;
}

/* INSERT */
function handleInsert(){
  const v=Number(value.value);
  if(isNaN(v)) return;

  if(contains(root,v)){
    showMessage("Duplicate value â€“ not allowed","error");
    return;
  }
  root=insert(root,v);
  draw();
  showMessage(`Node ${v} inserted`,"success");
}

function insert(n,v){
  if(!n) return new Node(v);
  if(v<n.val) n.left=insert(n.left,v);
  else n.right=insert(n.right,v);
  return n;
}

/* DELETE */
function handleDelete(){
  const v=Number(value.value);
  if(!contains(root,v)){
    showMessage("Node not found","warn");
    return;
  }
  root=remove(root,v);
  draw();
  showMessage(`Node ${v} deleted`,"warn");
}

function remove(n,v){
  if(!n) return null;
  if(v<n.val) n.left=remove(n.left,v);
  else if(v>n.val) n.right=remove(n.right,v);
  else{
    if(!n.left) return n.right;
    if(!n.right) return n.left;
    let s=n.right;
    while(s.left) s=s.left;
    n.val=s.val;
    n.right=remove(n.right,s.val);
  }
  return n;
}

/* DRAW */
function draw(){
  canvas.querySelectorAll(".node,.line,text").forEach(e=>e.remove());
  if(!root) return;
  layout(root,0,80,window.innerWidth-PANEL_WIDTH-80);
  edges(root);
  nodes(root);
}

function layout(n,d,x1,x2){
  if(!n) return;
  n.x=(x1+x2)/2;
  n.y=d*gap+80;
  layout(n.left,d+1,x1,n.x);
  layout(n.right,d+1,n.x,x2);
}

function edges(n){
  if(!n) return;
  if(n.left) link(n,n.left);
  if(n.right) link(n,n.right);
  edges(n.left);edges(n.right);
}

function link(a,b){
  const l=document.createElementNS("http://www.w3.org/2000/svg","line");
  l.setAttribute("x1",a.x);
  l.setAttribute("y1",a.y);
  l.setAttribute("x2",b.x);
  l.setAttribute("y2",b.y);
  l.setAttribute("class","line");
  canvas.appendChild(l);
}

function nodes(n){
  if(!n) return;
  const c=document.createElementNS("http://www.w3.org/2000/svg","circle");
  c.setAttribute("cx",n.x);
  c.setAttribute("cy",n.y);
  c.setAttribute("r",26);
  c.setAttribute("class","node");
  c.dataset.v=n.val;

  const t=document.createElementNS("http://www.w3.org/2000/svg","text");
  t.setAttribute("x",n.x);
  t.setAttribute("y",n.y+6);
  t.setAttribute("text-anchor","middle");
  t.setAttribute("fill","#fff");
  t.textContent=n.val;

  canvas.appendChild(c);
  canvas.appendChild(t);
  nodes(n.left);
  nodes(n.right);
}

/* TRAVERSALS (same) */
function animate(arr){
  const map={};
  document.querySelectorAll(".node").forEach(n=>{
    n.classList.remove("visited","current");
    map[n.dataset.v]=n;
  });
  let i=0;
  (function step(){
    if(i>0) map[arr[i-1]].classList.add("visited");
    if(i<arr.length){
      const el=map[arr[i]];
      el.classList.add("current");
      setTimeout(()=>{el.classList.remove("current");i++;step();},700);
    }
  })();
}
function inorder(){const r=[];(function f(n){if(!n)return;f(n.left);r.push(n.val);f(n.right)})(root);animate(r);}
function preorder(){const r=[];(function f(n){if(!n)return;r.push(n.val);f(n.left);f(n.right)})(root);animate(r);}
function postorder(){const r=[];(function f(n){if(!n)return;f(n.left);f(n.right);r.push(n.val)})(root);animate(r);}
function levelorder(){const r=[],q=[root];while(q.length){const n=q.shift();if(!n)continue;r.push(n.val);q.push(n.left,n.right)}animate(r);}
</script>

</body>
</html>
